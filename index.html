<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <title>Ventari Questionnaire Manager</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles/main.css"/>
    <link rel="stylesheet" href="styles/font-awesome-4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="styles/bootstrap-3.3.5-dist/css/bootstrap.css">
    <link rel="stylesheet" href="styles/bootstrap-3.3.5-dist/css/bootstrap-theme.min.css">

</head>
<body>

    <div class="question-pool">
        <div class="row question nopadding" id="1">
            <div class="col-xs-12 nopadding">
                
                <!-- Question Header -->
                <div class="row question-header">
                    <div class="col-xs-2 question-number">
                        <h1>Question #1</h1>
                    </div>
                    <div class="col-xs-8 question-type">
                        <h1>Type:</h1>
                        <select id="question-type">
                            <option value="single">Single Answer</option>
                            <option value="choose">Choose Any</option>
                            <option value="likert">Likert Scale</option>
                            <option value="tf">True or False</option>
                            <option value="yn">Yes or No</option>
                        </select>
                    </div>
                    <div class="col-xs-2 question-delete">
                        <h1>Delete</h1>
                    </div>
                </div>

                <!-- Question/Answer Body -->
                <div class="row question-body nopadding">
                    <div class="col-xs-12 nopadding">

                        <!-- Question Input -->
                        <div class="row question-text nopadding">
                            <div class="col-xs-12 nopadding">
                                <textarea class="expanding" placeholder="Question"></textarea>
                            </div>
                        </div>

                        <!-- Answer Input -->
                        <div class="row answer-text" id="1">
                            <div class="col-xs-9 nopadding">
                                <h1>Answer 1</h1>
                                <textarea class="expanding" placeholder="Answer"></textarea>
                            </div>
                            <div class="col-xs-2 answer-weight nopadding">
                                <h1>Weight</h1>
                                <input type="text" placeholder="#"></input>
                            </div>
                            <div class="col-xs-1 answer-delete nopadding">
                                <h1>x</h1>
                            </div>
                        </div>

                    </div>
                </div>


            </div>
        </div> <!-- question-1 -->
    </div>

<div class="mode-selector">
    <!-- Mode: select one, multiple answers -->
    <p>select type</p>
    <select id="question-type">
        <option value="single">Single Answer</option>
        <option value="choose">Choose All That Apply</option>
        <option value="likert">Likert Scale</option>
        <option value="tf">True or False</option>
        <option value="yn">Yes or No</option>
    </select>
    <button id="addQuestion">add</button>
</div>


<ul id="sortable1" class="connectedSortable">

    <!-- Question 1 -->
    <li class="survey-question ui-state-default" id='item1'>
        <div class="question">
            <i class="fa fa-sort"></i><input type="text" name="question1" placeholder="question" value=""><i class="fa fa-angle-up"></i><i class="fa fa-angle-down" style="display:none;"></i>
        </div>
        <div class="answers">
            <div class="answers-list" id="item1">
                <!-- Needs to be multiple choice where either one or more is selectable -->
                <div class="list">
                    <i class="fa fa-square-o"></i><i class="fa fa-check-square-o" style="display:none;"></i><input type="text" name="answer1" placeholder="answer" value=""><input type="text" name="weight" placeholder="weight" value=""><br>
                    <i class="fa fa-square-o"></i><i class="fa fa-check-square-o" style="display:none;"></i><input type="text" name="answer2" placeholder="answer" value=""><input type="text" name="weight" placeholder="weight" value=""><br>
                </div>
                <button onClick="addAnswer(this.parentElement)">add</button><button onClick="addAnswer(this.parentElement)">remove</button>
            </div>
        </div>
    </li>

    <!-- Question 2 -->
    <li class="survey-question ui-state-default" id='item1'>
        <div class="question">
            <i class="fa fa-sort"></i><input type="text" name="question1" placeholder="question" value=""><i class="fa fa-angle-up"></i><i class="fa fa-angle-down" style="display:none;"></i>
        </div>
        <div class="answers">

            <div class="answers-list" id="item2">
                <!-- Needs to be multiple choice where either one or more is selectable -->
                <div class="list">
                    <i class="fa fa-square-o"></i><i class="fa fa-check-square-o" style="display:none;"></i><input type="text" name="answer1" placeholder="answer" value=""><input type="text" name="weight" placeholder="weight" value=""><br>
                    <i class="fa fa-square-o"></i><i class="fa fa-check-square-o" style="display:none;"></i><input type="text" name="answer2" placeholder="answer" value=""><input type="text" name="weight" placeholder="weight" value=""><br>
                </div>
                <button onClick="addAnswer(this.parentElement)">add</button><button onClick="addAnswer(this.parentElement)">remove</button>
            </div>
        </div>
    </li>

    <!-- Likert Scale -->
    <li class="survey-question ui-state-default" id='item4'>
        <div class="question">
            <i class="fa fa-sort"></i><input type="text" name="question1" placeholder="question" value=""><i class="fa fa-angle-up"></i><i class="fa fa-angle-down" style="display:none;"></i>
        </div>
        <div class="answers">

            <table class="">
                <thead>
                <tr>
                    <th></th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>4</th>
                    <th>5</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>least?</td>
                    <td><input type="radio" value="1" name="something"/></td>
                    <td><input type="radio" value="2" name="something"/></td>
                    <td><input type="radio" value="3" name="something"/></td>
                    <td><input type="radio" value="4" name="something"/></td>
                    <td><input type="radio" value="5" name="something"/></td>
                    <td>most</td>
                </tr>
                </tbody>
            </table>
        </div>
    </li>

    <!-- True or False -->
    <li class="survey-question ui-state-default" id='item4'>
        <div class="question">
            <i class="fa fa-sort"></i><input type="text" name="question1" placeholder="question" value=""><i class="fa fa-angle-up"></i><i class="fa fa-angle-down" style="display:none;"></i>
        </div>
        <div class="answers">
            <form action="">
                <input type="radio" name="binary" value="true">True<br>
                <input type="radio" name="binary" value="false">False
            </form>
        </div>
    </li>

    <!-- Yes or No -->
    <li class="survey-question ui-state-default" id='item4'>
        <div class="content">
            <div class="question">
                <i class="fa fa-sort"></i><input type="text" name="question1" placeholder="question" value=""><i class="fa fa-angle-up"></i><i class="fa fa-angle-down" style="display:none;"></i>
            </div>
            <div class="answers">
                <form action="">
                    <input type="radio" name="binary" value="true">Yes<br>
                    <input type="radio" name="binary" value="false">No
                </form>
            </div>
        </div>
    </li>

</ul>


<script src="scripts/jquery-1.11.3.min.js"></script>
<script src="scripts/jquery-ui-1.11.4/jquery-ui.js"></script>
<script src="scripts/expanding.js"></script>
<script>
    $(function() {
        $( "#sortable1, #sortable2" ).sortable({
            placeholder: "sortable-placeholder",
            tolerance: "pointer",
            connectWith: ".connectedSortable",
            update : function () {
                var order1 = $('#sortable1').sortable('toArray').toString();
                //alert("Order 1:"+order1);
            },
            start: function(event, ui){
                $(ui.item).height(20);
            }
        }).disableSelection();
    });

    // Slide toggle
    $(".fa-angle-up").on("click", function() {
        $(this).parent().parent().children('div').eq(1).slideUp(400);
        $(this).hide().siblings('.fa-angle-down').show();
    });
    $('.fa-angle-down').on('click', function() {
        $(this).parent().parent().children('div').eq(1).slideDown(400);
        $(this).hide().siblings('.fa-angle-up').show();
    });

    // Checkbox toggle
    $(".fa-square-o").on("click", function() {
        $(this).parent().parent().children('div').eq(1).slideUp(400);
        $(this).hide().siblings('.fa-check-square-o').show();
    });
    $('.fa-check-square-o').on('click', function() {
        $(this).parent().parent().children('div').eq(1).slideDown(400);
        $(this).hide().siblings('.fa-square-o').show();
    });


    $('#addSurvey').click(function() {
        console.log('adding new survey to list');

        // Create Q/A
        //var

        // Append to list
//        $('#sortable1').append();
    });

    // Create multipleChoice


    // Change Answer Type
    $(document).ready(function() {
        $("li").click(function(event) {
            //alert(event.target.id);
        });
    });
    //document.getElementById("myText").readOnly = true;


    $('#addQuestion').on("click", function() {
        console.log($("#question-type option:selected").val());
        createQuestion($("#question-type option:selected").val());
    })


    function createQuestion(question-type) {
        if (question-type == "single") {
            $('#sortable1').append('<li class="survey-question ui-state-default" id="item1">'
                    + '<div class="question">'
                    + '<i class="fa fa-sort"></i><input type="text" name="question1" placeholder="question" value=""><i class="fa fa-angle-up"></i><i class="fa fa-angle-down" style="display:none;"></i>'
                    + '</div>'
                    + '<div class="answers">'
                    + '<div class="answers-list" id="item1">'
                    + '<div class="list">'
                    + '<input type="text" name="answer1" placeholder="answer" value=""><input type="text" name="weight" placeholder="weight" value=""><br>'
                    + '<input type="text" name="answer2" placeholder="answer" value=""><input type="text" name="weight" placeholder="weight" value=""><br>'
                    + '</div>'
                    + '<button onClick="addAnswer(this.parentElement)">add more options</button>'
                    + '</div>'
                    + '</div>'
                    + '</li>');
        }
        else if (question-type == "choose") {
            $('#sortable1').append('<li class="survey-question ui-state-default" id="item1">'
                    + '<div class="question">'
                    + '<i class="fa fa-sort"></i><input type="text" name="question1" placeholder="question" value=""><i class="fa fa-angle-up"></i><i class="fa fa-angle-down" style="display:none;"></i>'
                    + '</div>'
                    + '<div class="answers">'
                    + '<div class="answers-list" id="item1">'
                    + '<div class="list">'
                    + '<input type="text" name="answer1" placeholder="answer" value=""><input type="text" name="weight" placeholder="weight" value=""><br>'
                    + '<input type="text" name="answer2" placeholder="answer" value=""><input type="text" name="weight" placeholder="weight" value=""><br>'
                    + '</div>'
                    + '<button onClick="addAnswer(this.parentElement)">add more options</button>'
                    + '</div>'
                    + '</div>'
                    + '</li>');
        }
        else if (question-type == "likert") {
            $('#sortable1').append('<li class="survey-question ui-state-default" id="item4">'
                    + '<div class="question">'
                    + '<i class="fa fa-sort"></i><input type="text" name="question1" placeholder="question" value=""><i class="fa fa-angle-up"></i><i class="fa fa-angle-down" style="display:none;"></i>'
                    + '</div>'
                    + '<div class="answers">'
                    + '<table class="">'
                    + '<thead>'
                    + '<tr>'
                    + '<th></th>'
                    + '<th>1</th>'
                    + '<th>2</th>'
                    + '<th>3</th>'
                    + '<th>4</th>'
                    + '<th>5</th>'
                    + '<th></th>'
                    + '</tr>'
                    + '</thead>'
                    + '<tbody>'
                    + '<tr>'
                    + '<td>least?</td>'
                    + '<td><input type="radio" value="1" name="something"/></td>'
                    + '<td><input type="radio" value="2" name="something"/></td>'
                    + '<td><input type="radio" value="3" name="something"/></td>'
                    + '<td><input type="radio" value="4" name="something"/></td>'
                    + '<td><input type="radio" value="5" name="something"/></td>'
                    + '<td>most</td>'
                    + '</tr>'
                    + '</tbody>'
                    + '</table>'
                    + '</div>'
                    + '</li>');
        }
    }

    // need to get the id of the 'li' so I can add to the answer-list
    function addAnswer(answerList) {

        //get index

        $(answerList).children('.list').append('<i class="fa fa-square-o"></i><i class="fa fa-check-square-o"></i><input type="text" name="answer2" placeholder="answer" value=""><input type="text" name="weight" placeholder="weight" value=""><br/>');
    }

    function buildAnswer() {
        var result = document.createElement()
    }

</script>
</body>
</html>
